<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title th:text="${user.username} + ' profile'">Profile</title>
</head>
<body>
<div th:insert="~{fragments/menu :: #nav-menu}"></div>
<h1 ALIGN="center" th:text="${user.username} + ' profile'">PROFILE</h1>
<table border="1" align="center">
    <tr>
        <td>Name</td>
        <td th:text="${user.username}"></td>
    </tr>
    <tr>
        <td>Role</td>
        <td th:text="${user.role}"></td>
    </tr>
    <tr>
        <td>Email</td>
        <td th:text="${user.email}"></td>
    </tr>
    <tr th:if="${user.houseNumber != null}">
        <td>Living house number</td>
        <td>
            <div sec:authorize="hasAnyAuthority('ADMIN', 'CONCIERGE')">
                <a th:href="@{/houses/house/{id}(id = ${user.houseId})}">
                    <span th:text="${user.houseNumber}"></span></a></div>
            <div sec:authorize="hasAuthority('RESIDENT')"
                 th:if="${#authentication.principal.username} == ${user.username}">
                <a th:text="${user.houseNumber}"></a>
            </div>
        </td>
    </tr>
    <tr th:if="${user.flatNumber != null}">
        <td>Flat number</td>
        <td>
            <div sec:authorize="hasAnyAuthority('ADMIN', 'CONCIERGE')">
                <a th:href="@{/flat/{id}(id = ${user.flatId})}">
                    <span th:text="${user.flatNumber}"></span></a></div>
            <div sec:authorize="hasAuthority('RESIDENT')"
                 th:if="${#authentication.principal.username} == ${user.username}">
                <a th:text="${user.flatNumber}"></a>
            </div>
        </td>
    </tr>
</table>
<div th:if="${#authentication.principal.username} == ${user.username}"
     align="center">
    <a th:href="@{/profile/update}">Update</a>
</div>
<div sec:authorize="hasAuthority('ADMIN')" align="center">
    <a th:href="@{/manager/edit_user/{id}(id = ${user.userId})}">Edit</a>
</div>
</body>
</html>